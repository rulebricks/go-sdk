// Code generated by Fern. DO NOT EDIT.

package values

import (
	context "context"
	sdk "sdk"
	core "sdk/core"
	internal "sdk/internal"
	option "sdk/option"
)

type Client struct {
	WithRawResponse *RawClient

	options *core.RequestOptions
	baseURL string
	caller  *internal.Caller
}

func NewClient(options *core.RequestOptions) *Client {
	return &Client{
		WithRawResponse: NewRawClient(options),
		options:         options,
		baseURL:         options.BaseURL,
		caller: internal.NewCaller(
			&internal.CallerParams{
				Client:      options.HTTPClient,
				MaxAttempts: options.MaxAttempts,
			},
		),
	}
}

// Retrieve all dynamic values for the authenticated user. Use the 'include' parameter to control whether usage information is returned.
func (c *Client) List(
	ctx context.Context,
	request *sdk.ListValuesRequest,
	opts ...option.RequestOption,
) (sdk.DynamicValueListResponse, error) {
	response, err := c.WithRawResponse.List(
		ctx,
		request,
		opts...,
	)
	if err != nil {
		return nil, err
	}
	return response.Body, nil
}

// Update existing dynamic values or add new ones for the authenticated user. Supports both flat and nested object structures. Nested objects are automatically flattened using dot notation and keys are converted to readable format (e.g., 'user_name' becomes 'User Name', nested 'user.contact_info.email' becomes 'User.Contact Info.Email').
func (c *Client) Update(
	ctx context.Context,
	request *sdk.UpdateValuesRequest,
	opts ...option.RequestOption,
) (sdk.DynamicValueListResponse, error) {
	response, err := c.WithRawResponse.Update(
		ctx,
		request,
		opts...,
	)
	if err != nil {
		return nil, err
	}
	return response.Body, nil
}

// Delete a specific dynamic value for the authenticated user by its ID.
func (c *Client) Delete(
	ctx context.Context,
	request *sdk.DeleteValuesRequest,
	opts ...option.RequestOption,
) (*sdk.SuccessMessage, error) {
	response, err := c.WithRawResponse.Delete(
		ctx,
		request,
		opts...,
	)
	if err != nil {
		return nil, err
	}
	return response.Body, nil
}
